{% load static %}
<!--TITLE-->
<title>Library Management | Home</title>

<!--SHORTCUT ICON-->
<link rel="shortcut icon" href="images/logo.png">

<!--META TAGS-->
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

<!--FONT AWESOME-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!--GOOGLE FONTS-->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
<link
    href="https://fonts.googleapis.com/css2?family=Raleway:wght@700;800;900&family=Source+Sans+3:wght@200;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
<!--EXTERNAL STYLE SHEET-->
<link rel="stylesheet" href="{% static 'LibararyManagement_App/css/style.css' %}">
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <div class="content">
        <h2 class="logo">Library Management</h2>
        <h1>OPENING<br> THE DOOR TO KNOWLEDGE</h1>
        <br><br>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="arrow bounce">
                        <a class="fa fa-arrow-down" href="#"></a>
                    </div>
                    <section class="button">
                        <div class="searchBox">
                            <button onclick="clearAdmin()" style="width: 160px;" class="searchButton"
                                data-bs-toggle="modal" data-bs-target="#adminLoginModal" href="#">Admin Login</button>
                        </div>
                    </section>
                </div>
                <div class="col-md-4">
                    <div class="arrow bounce">
                        <a class="fa fa-arrow-down" href="#"></a>
                    </div>
                    <section class="button">
                        <div class="searchBox">
                            <button style="width: 160px;" onclick="clearStudent()" class="searchButton"
                                data-bs-toggle="modal" data-bs-target="#studentLoginModal" href="#">Student
                                Login</button>
                        </div>
                    </section>
                </div>
                <div class="col-md-4">
                    <div class="arrow bounce">
                        <a class="fa fa-arrow-down" href="#"></a>
                    </div>
                    <section class="button">
                        <div class="searchBox">
                            <button style="width: 160px;" onclick="clearStudentSignup()" class="searchButton"
                                data-bs-toggle="modal" data-bs-target="#studentSignUpModal" href="#">Student Sign
                                Up</button>
                        </div>
                    </section>
                </div>
            </div>
        </div>

    </div>



    <!-- Admin Login Modal -->
    <div class="modal fade" id="adminLoginModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content   bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Admin Login</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><label for="admin_email">Email : </label></p>
                    <p><input type="email" id="admin_email" class="form-control"></p>
                    <p><span id="admin_email_error" style="color:red;"></span></p>
                    <p><label for="admin_password">Password :</label></p>
                    <p><input type="password" id="admin_password" class="form-control"></p>
                    <p><span id="admin_password_error" style="color:red;"></span></p>
                </div>
                <div class="modal-footer text-center mx-auto">
                    <button type="button" onclick="adminLogin()" class="btn btn-warning">Login</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Student Login Modal -->
    <div class="modal fade" id="studentLoginModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content   bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Student Login</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><label for="student_email">Email : </label></p>
                    <p><input type="email" id="student_email" class="form-control"></p>
                    <p><span id="student_email_error" style="color:red;"></span></p>
                    <p><label for="student_password">Password :</label></p>
                    <p><input type="password" id="student_password" class="form-control"></p>
                    <p><span id="student_password_error" style="color:red;"></span></p>
                </div>
                <div class="modal-footer text-center mx-auto">
                    <button type="button" onclick="studentLogin()" class="btn btn-warning">Login</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Student Sign Up Modal -->
    <div class="modal fade" id="studentSignUpModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content   bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Student Login</h5>
                    <button type="button" id="close_signup_modal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><label for="student_signup_email">Email : </label></p>
                    <p><input type="email" id="student_signup_email" class="form-control"></p>
                    <p><span id="student_signup_email_error" style="color:red;"></span></p>
                    <p><label for="student_signup_password">Password :</label></p>
                    <p><input type="password" id="student_signup_password" class="form-control"></p>
                    <p><span id="student_signup_password_error" style="color:red;"></span></p>
                    <p><label for="student_signup_cnf_password">Confirm Password :</label></p>
                    <p><input type="password" id="student_signup_cnf_password" class="form-control"></p>
                    <p><span id="student_signup_cnf_password_error" style="color:red;"></span></p>
                </div>
                <div class="modal-footer text-center mx-auto">
                    <button type="button" onclick="studentSignUp()" class="btn btn-warning">Sign Up</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
    <script>
        function clearAdmin() {
            $('#admin_email').val('');
            $('#admin_password').val('');
            $('#admin_email_error').html('');
            $('#admin_password_error').html('');
        }
        function clearStudent() {
            $('#student_email').val('');
            $('#student_password').val('');
            $('#student_password_error').html('');
            $('#student_email_error').html('');
        }
        function clearStudentSignup() {
            $('#student_signup_email').val('');
            $('#student_signup_password').val('');
            $('#student_signup_cnf_password').val('');
            $('#student_signup_email_error').html('');
            $('#student_signup_password_error').html('');
            $('#student_signup_cnf_password_error').html('');
        }
        ///////////////////////////// Admin Login

        $("#admin_email").keyup(function () {
            $('#admin_email_error').html('');
        });
        $("#admin_password").keyup(function () {
            $('#admin_password_error').html('');
        });
        function adminLogin() {
            var email = $('#admin_email').val();
            var password = $('#admin_password').val();

            if (email == "") {
                $('#admin_email_error').html('Please enter your email...');
            }
            else if (!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)) {
                $('#admin_email_error').html('Please enter valid email...');
            }
            else if (password == "") {
                $('#admin_password_error').html('Please enter your password...');
            }
            else {
                $.ajax({
                    method: "POST",
                    url: "/admin_login/",
                    data: {
                        'email': email,
                        'password': password,
                    },
                    success: function (result) {
                        if (result.status == "1") {
                            location.href = "/admin_dashboard/"
                        }
                        else {
                            $('#admin_password_error').html(result.msg);
                        }
                    }
                });
            }
        }
        ///////////////////////////// Student Login

        $("#student_email").keyup(function () {
            $('#student_email_error').html('');
        });
        $("#student_password").keyup(function () {
            $('#student_password_error').html('');
        });
        function studentLogin() {
            var email = $('#student_email').val();
            var password = $('#student_password').val();

            if (email == "") {
                $('#student_email_error').html('Please enter your email...');
            }
            else if (!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)) {
                $('#student_email_error').html('Please enter valid email...');
            }
            else if (password == "") {
                $('#student_password_error').html('Please enter your password...');
            }
            else {
                $.ajax({
                    method: "POST",
                    url: "/student_login/",
                    data: {
                        'email': email,
                        'password': password,
                    },
                    success: function (result) {
                        if (result.status == "1") {
                            location.href = "/student_dashboard/"
                        }
                        else {
                            $('#student_password_error').html(result.msg);
                        }
                    }
                });
            }
        }
        
        ///////////////////////////// Student Sign Up

        $("#student_signup_email").keyup(function () {
            $('#student_signup_email_error').html('');
        });
        $("#student_signup_password").keyup(function () {
            $('#student_signup_password_error').html('');
        });
        $("#student_signup_cnf_password").keyup(function () {
            $('#student_signup_cnf_password_error').html('');
        });
        function studentSignUp() {
            var email = $('#student_signup_email').val();
            var password = $('#student_signup_password').val();
            var cnf_password = $('#student_signup_cnf_password').val();

            if (email == "") {
                $('#student_signup_email_error').html('Please enter your email...');
            }
            else if (!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)) {
                $('#student_signup_email_error').html('Please enter valid email...');
            }
            else if (password == "") {
                $('#student_signup_password_error').html('Please enter your password...');
            }
            else if (password.length < 6) {
                $('#student_signup_password_error').html('Password must have length of six...');
            }
            else if (cnf_password == "") {
                $('#student_signup_cnf_password_error').html('Please confirm your password...');
            }
            else if (password != cnf_password) {
                $('#student_signup_cnf_password_error').html('Both passwords must be matched...');
            }
            else {
                $.ajax({
                    method: "POST",
                    url: "/student_signup/",
                    data: {
                        'email': email,
                        'password': password,
                    },
                    success: function (result) {
                        if (result.status == "1") {   
                            $( "#close_signup_modal" ).trigger( "click" );
                            Swal.fire({
                                icon: 'success',
                                title: result.msg,
                                showConfirmButton: false,
                                timer: 2000
                            })
                        }
                        else {
                            $('#student_signup_cnf_password_error').html(result.msg);
                        }
                    }
                });
            }
        }
    </script>
</body>